language: c

os:
 - linux
 - osx

compiler:
  - gcc
  - clang

before_install:
 - if [ "${TRAVIS_OS_NAME}" == "linux" ]; then sudo apt-get update -qq ; fi
 - if [ "${TRAVIS_OS_NAME}" == "linux" ]; then sudo apt-get install -qq libgd2-xpm libgd2-xpm-dev check ; fi
 - if [ "${TRAVIS_OS_NAME}" == "osx" ]; then brew install gd check ; fi

script:
 - if [ "${TRAVIS_OS_NAME}" == "linux" ]; then make debug && make tests && sudo make install && vnstat --version ; fi
 - if [ "${TRAVIS_OS_NAME}" == "osx" ]; then make debug && make tests ; fi

notifications:
  email:
    on_success: always
    on_failure: always
