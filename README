(Updated 7.10.2003 based on version 1.2)

What is vnStat
::::::::::::::

 In short, vnStat is a console-based network traffic monitor that uses the
 /proc -filesystem to get the needed information. This means that vnStat wont 
 actually be sniffing any traffic. See the webpage for few 'screenshots'.


Getting started
:::::::::::::::

 First you should install vnStat. See the INSTALL file, it contains all needed
 information needed in the installing process. Users of version 1.0 should
 see the UPGRADE file first.


Available options
:::::::::::::::::

 The idea of this section is to explain to use of options that vnStat provides.
 Few simple options aren't listed. A complete list is available with 
 'vnstat -h'.

-u, --update

 vnStat will try to update the database whenever this option is specified.
 Use with -i to update a single interface or create a new database. Otherwise
 all enabled databases will be updated.

-r, --reset

 This will reset the internal counters in the database for the selected
 interface. Use this if the interface goes down and back up, otherwise
 that interface will get some extra traffic to its database.

--enable        enable interface
--disable       disable interface

 These two are probably useful especially for ppp users. If the interface
 goes down it should be disabled in order to avoid errors. Add something
 like 'vnstat -r --disable -i ppp0' to the script that's executed when
 the interface goes down and 'vnstat --enable -i ppp0' to the up script.
 Example scripts are available in the pppd directory. The location where
 those scripts should be installed will likely vary between distributions.
 Afaik for at least Debian and SuSe that's /etc/ppp/ip-up.d and
 /etc/ppp/ip-down.d. Gentoo uses the files /etc/ppp/ip-up and /etc/ip-down.

--nick

 It's possible to give a nickname for each interface in order to make
 identifying easier. -u is required with -nick. Displaying of the nick
 can be disabled by changing the nick to be the same as the name of the
 interface.

--rebuildtotal

 This will reset the total traffic counters and recount those using recorded
 months.

--dumpdb

 Instead of showing the database with a formated output, this output will
 dump the whole database in a format that should be easy to parse with most
 script languages. Use this for example with php or perl to make a custom
 webpage. The dump uses ; as field delimeter.
   
   active;1                        1 if the selected interface is enabled
   interface;eth0                  name for the interface
   nick;inet                       nick (if given)
   created;1023895272              creation date in Unix time
                                   (seconds since '00:00:00 1970-01-01 UTC')
   updated;1065467100              when the database was updated
   totalrx;569605                  all time total received MB
   totaltx;2023708                 all time total transmitted MB
   currx;621673719                 last seen rx value in /proc/net/dev
   curtx;981730184                 last seen rx value in /proc/net/dev
   totalrxk;644                    total rx kB counter
   totaltxk;494                    total tx kB counter
   btime;1059414541                system boot time in Unix time
 
 Then follows 30 lines like the following
   
   d;0;1065387600;584;3564;1

 where d = days, 0 = day number in database (0 is today), 1065387600 date in
 Unix time, 584 = rx MB, 3564 = tx MB and 1 tells that vnStat has filled this
 value and its in use.
 
   m;0;1064955600;4304;17677;1     (x12)
   t;0;1043722416;7499;30662;1     (x10)
  
 m = months and t = top10, all other fields are in the same order as in days.

-D, --debug

 Some debug output is included within vnStat and that output can be activated
 with this option. The output is somewhat self explaining and should give some
 clues what vnStat is doing.

-tr, --traffic

 This will make vnStat calculation how much traffic goes through the selected
 interface during the given time. The time will be 5 seconds if a number
 parameter isn't included.

--testkernel

 For some reason, there's few kernels that don't keep the boot time correct.
 This option will test if the btime stays always to same like it should or
 if it's shifting. Only /proc/stat is accessed so there's no black magic
 or strange tricks included.


Usage tips
::::::::::

 vnStat has few settings that can be changed before compiling by editing
 vnstat.h that's included in the src directory. There's comments included
 so see the file with some plain text editor and recompile (and reinstall)
 after any changes.

 However, it's likely that someone will ask anyway how to change the date
 format so here's a short howto about that. First go to the src directory
 and open vnstat.h. Search lines 21-23, those should look like these:

#define DFORMAT "%d.%m."
#define MFORMAT "%b '%y"
#define TFORMAT "%d.%m.%y"

 In order to get the date format to look like what's used for example in
 the US change those lines to:

#define DFORMAT "%m/%d"
#define MFORMAT "%b '%y"
#define TFORMAT "%m/%d/%y"

 and run 'make' (or 'make single') after that in that same src directory or
 continue with the install procedure if you were wise enough to read this
 file before installing. :)
 
 Next, copy the binary over the old one

   cp vnstat /usr/bin/vnstat

 or some other path that you've used. Changing the date format wont affect
 the database in any way.


Contacting the author
:::::::::::::::::::::

 email:    Teemu Toivola <tst@iki.fi>
 irc:      Vergo (IRCNet)

 The current version of vnStat is always available from 
 http://torus.lnet.lut.fi/vnstat/

 My email address is static, but the url for vnStat is likely to change
 some day. The project page at freshmeat http://freshmeat.net/projects/vnstat/
 will be updated after any change.
